<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Guardar</title>

  

        <link rel="stylesheet" href="CSS/guardar.css">

        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">

        <!-- Matomo -->
        <script>
            var _paq = window._paq = window._paq || [];
            /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
            _paq.push(["setDocumentTitle", document.domain + "/" + document.title]);
            _paq.push(["setCookieDomain", "*.35.169.201.141"]);
            _paq.push(["setDomains", ["*.35.169.201.141","*.ec2-35-169-201-141.compute-1.amazonaws.com"]]);
            _paq.push(['trackPageView']);
            _paq.push(['enableLinkTracking']);
            (function() {
            var u="//98.85.171.158/";
            _paq.push(['setTrackerUrl', u+'matomo.php']);
            _paq.push(['setSiteId', '4']);
            var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
            g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
            })();
        </script>
        <!-- End Matomo Code -->
    </head>

    <body>
        <div class="logo-container">
            <div class="d-flex justify-content-start">
                <img src="Recursos/UDABERRI_LOGOA.png" alt="Logo">
            </div>
        </div>

        <div class="titulo">2025, Barcelona</div>
        <div class="content-wrapper">
            <div class="persona-block">
                <div class="persona-header">
                    <img src="Recursos/personas/elene.png" alt="Elene" class="persona-foto">
                    <span class="persona-nombre">Elene</span>
                </div>
                <div class="grupo-block">
                    <div class="grupo-header">
                        <label><input type="checkbox" class="grupo-checkbox custom-checkbox">
                        <span class="grupo-nombre">Berastegi</span></label>
                    </div>
                    <div class="prenda-lista">
                        <div class="prenda-item"><label><input type="checkbox" class="prenda-checkbox custom-checkbox"><span class="prenda-nombre">Blusa blanca</span></label><span class="prenda-cantidad">13</span></div>
                        <div class="prenda-item"><label><input type="checkbox" class="prenda-checkbox custom-checkbox"><span class="prenda-nombre">Pantalon blanco</span></label><span class="prenda-cantidad">9</span></div>
                        <div class="prenda-item"><label><input type="checkbox" class="prenda-checkbox custom-checkbox"><span class="prenda-nombre">Txapela</span></label><span class="prenda-cantidad">2</span></div>
                        <div class="prenda-item"><label><input type="checkbox" class="prenda-checkbox custom-checkbox"><span class="prenda-nombre">Faja</span></label><span class="prenda-cantidad">5</span></div>
                    </div>
                </div>
                <div class="grupo-block">
                    <div class="grupo-header">
                        <label><input type="checkbox" class="grupo-checkbox custom-checkbox">
                        <span class="grupo-nombre">Gipuzkoano</span></label>
                    </div>
                    <div class="prenda-lista">
                        <div class="prenda-item"><label><input type="checkbox" class="prenda-checkbox custom-checkbox"><span class="prenda-nombre">Blusa blanca</span></label><span class="prenda-cantidad">3</span></div>
                        <div class="prenda-item"><label><input type="checkbox" class="prenda-checkbox custom-checkbox"><span class="prenda-nombre">Corpiño</span></label><span class="prenda-cantidad">4</span></div>
                        <div class="prenda-item"><label><input type="checkbox" class="prenda-checkbox custom-checkbox"><span class="prenda-nombre">Falda</span></label><span class="prenda-cantidad">7</span></div>
                        <div class="prenda-item"><label><input type="checkbox" class="prenda-checkbox custom-checkbox"><span class="prenda-nombre">Delantal</span></label><span class="prenda-cantidad">5</span></div>
                        <div class="prenda-item"><label><input type="checkbox" class="prenda-checkbox custom-checkbox"><span class="prenda-nombre">Pololo</span></label><span class="prenda-cantidad">13</span></div>
                        <div class="prenda-item"><label><input type="checkbox" class="prenda-checkbox custom-checkbox"><span class="prenda-nombre">Enagua</span></label><span class="prenda-cantidad">2</span></div>
                        <div class="prenda-item"><label><input type="checkbox" class="prenda-checkbox custom-checkbox"><span class="prenda-nombre">Pañuelo</span></label><span class="prenda-cantidad">1</span></div>
                    </div>
                </div>
            </div>

            <div class="persona-block">
                <div class="persona-header">
                    <img src="Recursos/personas/mario.png" alt="Mario" class="persona-foto">
                    <span class="persona-nombre">Mario</span>
                </div>
                <div class="grupo-block">
                    <div class="grupo-header">
                        <label><input type="checkbox" class="grupo-checkbox custom-checkbox">
                        <span class="grupo-nombre">Berastegi</span></label>
                    </div>
                    <div class="prenda-lista">
                        <div class="prenda-item"><label><input type="checkbox" class="prenda-checkbox custom-checkbox"><span class="prenda-nombre">Blusa blanca</span></label><span class="prenda-cantidad">8</span></div>
                        <div class="prenda-item"><label><input type="checkbox" class="prenda-checkbox custom-checkbox"><span class="prenda-nombre">Pantalon blanco</span></label><span class="prenda-cantidad">7</span></div>
                        <div class="prenda-item"><label><input type="checkbox" class="prenda-checkbox custom-checkbox"><span class="prenda-nombre">Txapela</span></label><span class="prenda-cantidad">5</span></div>
                        <div class="prenda-item"><label><input type="checkbox" class="prenda-checkbox custom-checkbox"><span class="prenda-nombre">Faja</span></label><span class="prenda-cantidad">2</span></div>
                    </div>
                </div>
                <div class="grupo-block">
                    <div class="grupo-header">
                        <label><input type="checkbox" class="grupo-checkbox custom-checkbox">
                        <span class="grupo-nombre">Gipuzkoano</span></label>
                    </div>
                    <div class="prenda-lista">
                        <div class="prenda-item"><label><input type="checkbox" class="prenda-checkbox custom-checkbox"><span class="prenda-nombre">Blusa blanca</span></label><span class="prenda-cantidad">8</span></div>
                        <div class="prenda-item"><label><input type="checkbox" class="prenda-checkbox custom-checkbox"><span class="prenda-nombre">Chaleco</span></label><span class="prenda-cantidad">8</span></div>
                        <div class="prenda-item"><label><input type="checkbox" class="prenda-checkbox custom-checkbox"><span class="prenda-nombre">Pantalon</span></label><span class="prenda-cantidad">7</span></div>
                        <div class="prenda-item"><label><input type="checkbox" class="prenda-checkbox custom-checkbox"><span class="prenda-nombre">Faja</span></label><span class="prenda-cantidad">5</span></div>
                        <div class="prenda-item"><label><input type="checkbox" class="prenda-checkbox custom-checkbox"><span class="prenda-nombre">Txapela</span></label><span class="prenda-cantidad">13</span></div>
                    </div>
                </div>
            </div>
            

            
        </div>
        <div id="mensaje-final" style="display:none; text-align:left; color:#5DB22F; font-size:3rem; font-weight:700; margin-top:2rem; margin-left:1.2rem;">
            Ya está todo guardado!
        </div>

        <!-- Navigation -->
        <div class="d-flex justify-content-around align-items-center bg-white fixed-bottom py-3 bottom-nav">
            <div class="flex-fill text-center">
                <a href="nuevo_elemento.html"><img src="Recursos/elemento.png" alt="nuevo elemento" style="height: 24px; width: auto;"></a>
            </div>
            <div class="flex-fill text-center">
                <a href="inventario.html"><img src="Recursos/inventario.png" alt="inventario" style="height: 24px; width: auto;"></a>
            </div>
            <div class="flex-fill text-center">
                <a href="home.html"><img src="Recursos/home_selected.png" alt="home" style="height: 24px; width: auto;"></a>
            </div>
            <div class="flex-fill text-center">
                <a href="buscar.html"><img src="Recursos/buscar.png" alt="buscar" style="height: 24px; width: auto;"></a>
            </div>
            <div class="flex-fill text-center">
                <a href="nueva_actuación.html"><img src="Recursos/nuevo.png" alt="nuevo" style="height: 24px; width: auto;"></a>
            </div>
        </div>
        <script>
        document.querySelectorAll('.persona-block').forEach(function(persona) {
            const grupos = persona.querySelectorAll('.grupo-block');

            grupos.forEach(function(grupo) {
                const grupoCheckbox = grupo.querySelector('.grupo-checkbox');
                const grupoNombre = grupo.querySelector('.grupo-nombre');
                const prendaItems = grupo.querySelectorAll('.prenda-item');

                function setChecklistVisibility(visible) {
                    grupoCheckbox.style.display = visible ? '' : 'none';
                    grupoNombre.style.display = visible ? '' : 'none';
                    prendaItems.forEach(item => item.style.display = visible ? '' : 'none');
                }

                // Cuando cambia cualquier prenda
                grupo.querySelectorAll('.prenda-checkbox').forEach(function(prenda) {
                    prenda.addEventListener('change', function() {
                        const allChecked = Array.from(grupo.querySelectorAll('.prenda-checkbox')).every(cb => cb.checked);
                        grupoCheckbox.checked = allChecked;
                        if (allChecked) {
                            setChecklistVisibility(false);
                        }
                        // Comprobar si todos los grupos están ocultos
                        const allHidden = Array.from(grupos).every(g => g.querySelector('.grupo-checkbox').style.display === 'none');
                        persona.style.display = allHidden ? 'none' : '';
                        // Comprobar si todas las personas están ocultas
                        const todasPersonas = document.querySelectorAll('.persona-block');
                        const todasOcultas = Array.from(todasPersonas).every(p => p.style.display === 'none');
                        document.getElementById('mensaje-final').style.display = todasOcultas ? '' : 'none';
                    });
                });

                // Cuando cambia el grupo
                grupoCheckbox.addEventListener('change', function() {
                    if (grupoCheckbox.checked) {
                        setChecklistVisibility(false);
                    } else {
                        setChecklistVisibility(true);
                        grupo.querySelectorAll('.prenda-checkbox').forEach(cb => cb.checked = false);
                    }
                    // Comprobar si todos los grupos están ocultos
                    const allHidden = Array.from(grupos).every(g => g.querySelector('.grupo-checkbox').style.display === 'none');
                    persona.style.display = allHidden ? 'none' : '';
                    // Comprobar si todas las personas están ocultas
                    const todasPersonas = document.querySelectorAll('.persona-block');
                    const todasOcultas = Array.from(todasPersonas).every(p => p.style.display === 'none');
                    document.getElementById('mensaje-final').style.display = todasOcultas ? '' : 'none';
                });
            });
        });
        </script>
    </body>
</html>